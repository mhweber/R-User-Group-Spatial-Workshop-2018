---
title: "Preliminaries"
---

### Background

So, to begin, what is R and why should we use R for spatial analysis?  Let's break that into two questions - first, what is R and why should we use it?

- A language and environment for statistical computing and graphics
- R is lightweight, free, open-source and cross-platform
- Works with contributed packages - [currently](https://cran.r-project.org/web/packages/) 12,938 -extensibility
- Automation and recording of workflow (reproducibility)
- Optimized work flow - data manipulation, analysis and visualization all in one place
- R does not alter underlying data - manipulation and visualization in memory
- R is great for repetetive graphics

![History of R](/R-User-Group-Spatial-Workshop-2018/img/History of R.png)

Second, why use R for spatial, or GIS, workflows?

- Spatial and statistical analysis in one environment
- Leverage statistical power of R (i.e.  modeling spatial data, data visualization, statistical exploration)
- Can handle vector and raster data, as well as work with spatial databases and pretty much any data format spatial data comes in
- R's GIS capabilities growing rapidly right now - new packages added monthly - currently about 180 spatial packages

Some drawbacks to using R for GIS work

- R not as good for interactive use as desktop GIS applications like ArcGIS or QGIS (i.e. editing features, panning, zooming, and analysis on selected subsets of features)
- Explicit coordinate system handling by the user, no on-the-fly projection support
- In memory analysis does not scale well with large GIS vector and tabular data
- Steep learning curve
- Up to you to find packages to do what you need - help not always great

An ideal solution for many tasks is using R in conjunction with traditional GIS software.

R runs on contributed packages - it has core functionality, but all the spatial work we would do in R is contained in user-contributed packages.  Primary ones you'll want to familiarize yourself with are `sf`, `rgdal`, `sp`, `rgeos`, `raster` - there are many, many more. A good source to learn about available R spatial packages is:

[CRAN Task View: Analysis of Spatial Data](https://cran.r-project.org/web/views/Spatial.html)

### Necessary R packages

First we need to install several R packages.  Note the use of the terms `package` and `library` in R - you encounter both, and if you want to delve into semantics of which to use see [this post on R-bloggers](https://www.r-bloggers.com/packages-v-libraries-in-r/).  R operates on user-contributed packages, and we'll be jumping into use of several of these spatial packages in this workshop.  Several packages we'll be making use of are `sp`, `rgdal`, `rgeos`, `raster`, and the new `sf` simple features package by Edzer Pebesma.  You should be able to use the packages tab in RStudio (see below) to install packages in a straightforward way.  Mac and Linux users may have certain pre-requisites to fill, I'll assume you can navigate these on your own or can assist as needed.

![RStudio Console](/R-User-Group-Spatial-Workshop-2018/img/figure/packages.png)

Install all of the following packages in R:
Install all of the following packages in R - note that for both `sf` and `tidyverse` - and specificallly `ggplot2` in `tidyverse`, I've indicated the alternative install from GitHub rather than CRAN.  This is optional, as is installing devtools, and you will be fine with the CRAN version of packages, except that you will not be able to reproduce one of the example plots in the `sf` section that uses `sf_geom` funtion from the development version of `ggplot2`. Note that `tidyverse` is a 'meta-package' that includes several specific packages such as `ggplot2`, `dplyr`, and `tidyr`.
```r
install.packages("devtools") # optional but needed for using install_github
install.packages("rgdal")
install.packages("rgeos")
install.packages("raster")
# From CRAN:
# install.packages("sf")
# From GitHub:
library(devtools)
install_github("edzer/sfr")
install.packages("gstat")
install.packages("spdep")
install.packages("maptools")
install.packages("stringr")
install.packages("reshape")
# From CRAN:
# install.packages("tidyverse")
# From GitHub:
devtools::install_github("hadley/tidyverse")
install.packages("micromap")
install.packages("tmap")
install.packages("RCurl")
install.packages("dataRetrieval")
install.packages("maps")
install.packages("USAboundaries")
install.packages("rasterVis")
install.packages("landsat")
install.packages("plotly")
install.packages("leaflet")
```

Installing `rgdal` will install the foundation spatial package, `sp`, as a dependency, and installing `tidyverse` will install both `ggplot2` and `dplyr`.

For Linux users, to install simple features for R (`sf`), you need GDAL >= 2.0.0, GEOS >= 3.3.0, and Proj.4 >=  4.8.0.  Edzer Pebesma's Simple Features for R GitHub repo has a good explanation:

[Simple Features for R](https://github.com/edzer/sfr)

You basically want to add [ubuntugis-unstable](http://ppa.launchpad.net/ubuntugis/ubuntugis-unstable/ubuntu/) to the package repositories and then get those three dependencies:

```r
sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable
sudo apt-get install libgdal-dev libgeos-dev libproj-dev
```

The Simple features for R package , `sf`, also needs udunits and udunits2 which may need coercing in linux:

[Units Issues in sf GitHub repo](https://github.com/edzer/units/issues/1)

The following should resolve:

```r
sudo apt-get install libudunits2-dev
```

